<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TruePart Studio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0a0a0a;
            color: #fff;
            overflow-x: hidden;
        }

        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #000000;
            border-bottom: 1px solid #333;
            z-index: 1000;
            padding: 15px 0;
        }

        .stats-bar {
            position: fixed;
            top: 70px;
            left: 0;
            right: 0;
            background: #1a1a1a;
            border-bottom: 1px solid #333;
            z-index: 999;
            padding: 15px 0;
        }

        .stats-bar-content {
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 40px;
            display: flex;
            gap: 50px;
            font-size: 1.1em;
            justify-content: center;
            align-items: center;
        }

        .stats-bar-item {
            color: #999;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stats-bar-item span {
            color: #fff;
            font-weight: 700;
        }

        .header-content {
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 40px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .brand-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .brand-icon {
            width: 80px;
            height: 80px;
            border-radius: 12px;
            overflow: hidden;
            margin-left: -10px;
        }

        .brand-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        h1 {
            font-size: 1.5em;
            color: #fff;
            font-weight: 700;
            letter-spacing: 0;
        }

        nav {
            display: flex;
            gap: 30px;
            padding: 0;
            background: transparent;
        }

        .nav-btn {
            background: transparent;
            color: #ccc;
            border: none;
            padding: 0;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            letter-spacing: 0;
            position: relative;
        }

        .nav-btn::after {
            display: none;
        }

        .nav-btn:hover {
            color: #fff;
        }

        .nav-btn.active {
            color: #fff;
        }

        .main-content {
            margin-top: 120px;
            min-height: calc(100vh - 120px);
        }

        .page {
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .page.active {
            display: block;
            opacity: 1;
        }

        /* Home Page Styles */
        .hero-section {
            height: 100vh;
            background: linear-gradient(135deg, #1a0000 0%, #000000 50%, #330000 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        #cubeCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        .hero-content {
            text-align: center;
            z-index: 10;
            max-width: 900px;
            padding: 40px;
            position: relative;
        }

        .hero-title {
            font-size: 4em;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #ff0000, #ffffff, #ff0000);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 3s infinite;
            background-size: 200% auto;
        }

        @keyframes shimmer {
            0%, 100% { background-position: 0% center; }
            50% { background-position: 100% center; }
        }

        .scroll-indicator {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            animation: bounce 2s infinite;
            z-index: 10;
        }

        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-20px); }
        }

        .scroll-indicator::before {
            content: '▼';
            font-size: 2em;
            color: #ff0000;
            display: block;
        }

        .goal-section {
            min-height: 100vh;
            background: linear-gradient(180deg, #000000 0%, #1a0000 100%);
            padding: 100px 40px;
            position: relative;
        }

        .goal-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, #ff0000, transparent);
        }

        .goal-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .goal-content h2 {
            font-size: 3em;
            margin-bottom: 40px;
            background: linear-gradient(135deg, #ff0000, #ff6666);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .goal-text {
            font-size: 1.4em;
            line-height: 2;
            color: #ccc;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        /* Games Page Styles */
        .games-container {
            padding: 60px 40px;
            max-width: 1600px;
            margin: 0 auto;
            min-height: 100vh;
        }

        .games-container h2 {
            font-size: 3em;
            margin-bottom: 60px;
            color: #fff;
            text-align: left;
            font-weight: 700;
        }

        .total-stats {
            display: none;
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
        }

        .game-card {
            background: #000;
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: block;
        }

        .game-card:hover {
            transform: translateY(-5px);
        }

        .game-thumbnail-container {
            width: 100%;
            height: 300px;
            overflow: hidden;
            position: relative;
        }

        .game-thumbnail-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .game-info {
            padding: 20px;
        }

        .game-title {
            font-size: 1.3em;
            font-weight: 700;
            margin-bottom: 15px;
            color: #fff;
        }

        .game-stats-container {
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }

        .stat-item {
            flex: 1;
        }

        .stat-label {
            font-size: 0.85em;
            color: #999;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.1em;
            font-weight: 700;
            color: #fff;
        }

        .loading {
            text-align: center;
            padding: 60px;
            font-size: 1.5em;
            color: #ff0000;
        }

        /* Team Page Styles */
        .team-container {
            padding: 60px 40px;
            max-width: 1400px;
            margin: 0 auto;
            min-height: 100vh;
        }

        .team-container h2 {
            font-size: 3em;
            margin-bottom: 60px;
            background: linear-gradient(135deg, #ff0000, #ff6666);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
        }

        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 40px;
            max-width: 900px;
            margin: 0 auto;
        }

        .team-card {
            background: linear-gradient(135deg, #1a0000, #0a0a0a);
            border: 2px solid #ff0000;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(255, 0, 0, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            gap: 30px;
        }

        .team-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 0, 0, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .team-card:hover::before {
            opacity: 1;
        }

        .team-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 60px rgba(255, 0, 0, 0.4);
        }

        .team-info {
            flex: 1;
            position: relative;
            z-index: 1;
        }

        .team-card h3 {
            font-size: 2em;
            margin-bottom: 10px;
            color: #ff0000;
        }

        .team-card .role {
            font-size: 1.1em;
            color: #ccc;
            margin-bottom: 5px;
        }

        .team-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 3px solid #ff0000;
            object-fit: cover;
            position: relative;
            z-index: 1;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="brand-section">
                <div class="brand-icon">
                    <img src="https://media.discordapp.net/attachments/1437375441999761534/1451956242540138576/Gemini_Generated_Image_eud3uzeud3uzeud3_1_1.png?ex=6963bea0&is=69626d20&hm=976906bc241c91fd774606cc1bf2a9e0de326cec94898001b64f2f63cacfdb8c&=&format=webp&quality=lossless&width=1780&height=1780" alt="TruePart">
                </div>
                <h1>TruePart</h1>
            </div>
            <nav>
                <button class="nav-btn active" onclick="showPage('home')">Home</button>
                <button class="nav-btn" onclick="showPage('games')">Our Games</button>
                <button class="nav-btn" onclick="showPage('team')">Meet Us</button>
            </nav>
        </div>
    </header>

    <div class="stats-bar">
        <div class="stats-bar-content">
            <div class="stats-bar-item">Total CCU: <span id="globalTotalCCU">-</span></div>
            <div class="stats-bar-item">Total Visits: <span id="globalTotalVisits">-</span></div>
        </div>
    </div>

    <div class="main-content">
        <div id="home" class="page active">
            <div class="hero-section">
                <canvas id="cubeCanvas"></canvas>
                <div class="hero-content">
                    <h2 class="hero-title">CRAFTING EXPERIENCES</h2>
                    <p style="font-size: 1.3em; color: #ccc;">Where creativity meets quality</p>
                </div>
                <div class="scroll-indicator"></div>
            </div>
            
            <div class="goal-section">
                <div class="goal-content">
                    <h2>Our Mission</h2>
                    <p class="goal-text">
                        At TruePart Studio, we're committed to creating unique and creative Roblox games that stand out from the crowd. 
                        We don't make brain rot or slop games—we put genuine effort into every project we create. 
                        We care deeply about the small details that make a game truly special, from polished mechanics to 
                        thoughtful design choices. Our passion is crafting experiences that players will remember and enjoy, 
                        not just another cookie-cutter game. Quality over quantity is our motto, and we're proud to bring 
                        creativity and care to the Roblox platform.
                    </p>
                </div>
            </div>
        </div>

        <div id="games" class="page">
            <div class="games-container">
                <h2>Our Games</h2>
                <div class="total-stats">
                    <div class="total-stat-item">Total CCU: <span id="totalCCU">-</span></div>
                    <div class="total-stat-item">Total Visits: <span id="totalVisits">-</span></div>
                </div>
                <div id="gamesList" class="games-grid">
                    <div class="loading">Loading games...</div>
                </div>
            </div>
        </div>

        <div id="team" class="page">
            <div class="team-container">
                <h2>MEET US</h2>
                <div class="team-grid">
                    <div class="team-card">
                        <div class="team-info">
                            <h3>TotallySpaghetti</h3>
                            <div class="role">Founder</div>
                            <div class="role">Lead Programmer</div>
                        </div>
                        <img class="team-avatar" src="https://cdn.discordapp.com/attachments/1326690286166560808/1333254638681362442/image.png?ex=696331e4&is=6961e064&hm=eef9e44607ce5de64c851c3acb2450eadcdaa7f3c7bc064b479a0d71e46c1ddd&" alt="TotallySpaghetti">
                    </div>
                    <div class="team-card">
                        <div class="team-info">
                            <h3>Oppy</h3>
                            <div class="role">Lead Artist</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== CONFIGURATION =====
        // Put your game PLACE IDs here (the number from the game URL)
        const GAME_PLACE_IDS = [
            89226104209047,
            125607488836191,
            9510198137,
        ];
        // ===== END CONFIGURATION =====

        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Remove active state from all buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Add active state to clicked button
            event.target.classList.add('active');
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            // Load games if games page is selected
            if (pageId === 'games' && GAME_PLACE_IDS.length > 0) {
                loadGames();
            }
        }

        async function loadGames() {
            const gamesList = document.getElementById('gamesList');
            
            if (GAME_PLACE_IDS.length === 0) {
                gamesList.innerHTML = '<p class="loading">No games configured yet. Add your game place IDs to the GAME_PLACE_IDS array in the code.</p>';
                return;
            }

            // Check if we have cached data that's less than 60 seconds old
            const now = Date.now();
            if (window.gamesCache && window.gamesCacheTime && (now - window.gamesCacheTime) < 60000) {
                displayGames(window.gamesCache);
                return;
            }

            gamesList.innerHTML = '<div class="loading">Loading games...</div>';
            
            try {
                // Direct URL with place IDs
                const url = `https://calm-waterfall-82e9.caestudios33.workers.dev/?placeIds=${GAME_PLACE_IDS.join(',')}`;
                
                const response = await fetch(url);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const result = await response.json();
                
                if (!result || !result.data || result.data.length === 0) {
                    gamesList.innerHTML = '<p class="loading">Could not find games. Please check your Place IDs.</p>';
                    return;
                }
                
                // Cache the result with timestamp
                window.gamesCache = result;
                window.gamesCacheTime = Date.now();
                displayGames(result);
                
            } catch (error) {
                gamesList.innerHTML = `<p class="loading">Error loading games: ${error.message}</p>`;
                console.error('Full error:', error);
            }
        }

        function displayGames(result) {
            const gamesList = document.getElementById('gamesList');
            
            // Calculate totals
            let totalCCU = 0;
            let totalVisits = 0;
            
            for (const game of result.data) {
                totalCCU += game.playing || 0;
                totalVisits += game.visits || 0;
            }
            
            // Update global stats bar
            document.getElementById('globalTotalCCU').textContent = formatNumber(totalCCU);
            document.getElementById('globalTotalVisits').textContent = formatNumber(totalVisits);
            
            let gamesHTML = '';
            
            for (const game of result.data) {
                gamesHTML += `
                    <a href="https://www.roblox.com/games/${game.rootPlaceId}" target="_blank" class="game-card">
                        <div class="game-thumbnail-container">
                            <img class="game-thumbnail-img" src="${game.thumbnail || 'https://via.placeholder.com/300x300/ff0000/ffffff?text=No+Image'}" alt="${game.name}">
                        </div>
                        <div class="game-info">
                            <div class="game-title">${game.name}</div>
                            <div class="game-stats-container">
                                <div class="stat-item">
                                    <div class="stat-label">Visits</div>
                                    <div class="stat-value">${formatNumber(game.visits || 0)}</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label">Playing</div>
                                    <div class="stat-value">${formatNumber(game.playing || 0)}</div>
                                </div>
                            </div>
                        </div>
                    </a>
                `;
            }
            
            gamesList.innerHTML = gamesHTML || '<p class="loading">No games found.</p>';
        }

        // Load games on page load to populate stats bar
        let retryTimeout = null;

        async function loadGames() {
            const gamesList = document.getElementById('gamesList');
            
            if (GAME_PLACE_IDS.length === 0) {
                gamesList.innerHTML = '<p class="loading">No games configured yet. Add your game place IDs to the GAME_PLACE_IDS array in the code.</p>';
                return;
            }

            // Check if we have cached data and if it's still fresh (within 60 seconds)
            if (window.gamesCache && window.gamesCacheTime && (Date.now() - window.gamesCacheTime < 60000)) {
                displayGames(window.gamesCache);
                return;
            }

            gamesList.innerHTML = '<div class="loading">Loading games...</div>';
            
            try {
                // Direct URL with place IDs
                const url = `https://calm-waterfall-82e9.caestudios33.workers.dev/?placeIds=${GAME_PLACE_IDS.join(',')}`;
                
                const response = await fetch(url);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const result = await response.json();
                
                if (!result || !result.data || result.data.length === 0) {
                    throw new Error('No game data received');
                }
                
                // Cache the result with timestamp
                window.gamesCache = result;
                window.gamesCacheTime = Date.now();
                
                // Clear any existing retry timeout
                if (retryTimeout) {
                    clearTimeout(retryTimeout);
                    retryTimeout = null;
                }
                
                displayGames(result);
                
            } catch (error) {
                console.error('Error loading games:', error);
                gamesList.innerHTML = '<div class="loading">Loading games...</div>';
                
                // Retry after 5 seconds
                if (retryTimeout) {
                    clearTimeout(retryTimeout);
                }
                retryTimeout = setTimeout(() => {
                    loadGames();
                }, 5000);
            }
        }

        function displayGames(result) {
            const gamesList = document.getElementById('gamesList');
            
            // Calculate totals
            let totalCCU = 0;
            let totalVisits = 0;
            
            for (const game of result.data) {
                totalCCU += game.playing || 0;
                totalVisits += game.visits || 0;
            }
            
            // Update global stats bar
            document.getElementById('globalTotalCCU').textContent = formatNumber(totalCCU);
            document.getElementById('globalTotalVisits').textContent = formatNumber(totalVisits);
            
            let gamesHTML = '';
            
            for (const game of result.data) {
                gamesHTML += `
                    <a href="https://www.roblox.com/games/${game.rootPlaceId}" target="_blank" class="game-card">
                        <div class="game-thumbnail-container">
                            <img class="game-thumbnail-img" src="${game.thumbnail || 'https://via.placeholder.com/300x300/ff0000/ffffff?text=No+Image'}" alt="${game.name}">
                        </div>
                        <div class="game-info">
                            <div class="game-title">${game.name}</div>
                            <div class="game-stats-container">
                                <div class="stat-item">
                                    <div class="stat-label">Visits</div>
                                    <div class="stat-value">${formatNumber(game.visits || 0)}</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label">Playing</div>
                                    <div class="stat-value">${formatNumber(game.playing || 0)}</div>
                                </div>
                            </div>
                        </div>
                    </a>
                `;
            }
            
            gamesList.innerHTML = gamesHTML || '<p class="loading">No games found.</p>';
        }

        // Load games on page load to populate stats bar
        window.addEventListener('load', () => {
            loadGames();
        });

        function formatNumber(num) {
            if (num >= 1000000000) {
                return (num / 1000000000).toFixed(1) + 'B';
            }
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            }
            if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toString();
        }

        // 3D Cube Animation
        const canvas = document.getElementById('cubeCanvas');
        const ctx = canvas.getContext('2d');
        let cubeRotation = { x: 0.5, y: 0.5, z: 0 };
        let targetRotation = { x: 0.5, y: 0.5, z: 0 };
        let lastScrollY = window.scrollY;

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Create cube vertices with more dots
        function createCubePoints() {
            const size = 200;
            const points = [];
            const dotsPerEdge = 20;
            
            // Generate dots along all 12 edges of the cube
            for (let i = 0; i < dotsPerEdge; i++) {
                const t = i / (dotsPerEdge - 1);
                const offset = (t - 0.5) * 2 * size;
                
                // Bottom face - 4 edges
                points.push([-size, -size, offset]); // left edge
                points.push([size, -size, offset]);  // right edge
                points.push([offset, -size, -size]); // front edge
                points.push([offset, -size, size]);  // back edge
                
                // Top face - 4 edges
                points.push([-size, size, offset]);  // left edge
                points.push([size, size, offset]);   // right edge
                points.push([offset, size, -size]);  // front edge
                points.push([offset, size, size]);   // back edge
                
                // Vertical edges - 4 edges
                points.push([-size, offset, -size]); // front-left
                points.push([size, offset, -size]);  // front-right
                points.push([-size, offset, size]);  // back-left
                points.push([size, offset, size]);   // back-right
            }
            
            return points;
        }

        const cubePoints = createCubePoints();

        function rotatePoint(point, rotation) {
            let [x, y, z] = point;
            
            // Rotate around X axis
            let cosX = Math.cos(rotation.x);
            let sinX = Math.sin(rotation.x);
            let y1 = y * cosX - z * sinX;
            let z1 = y * sinX + z * cosX;
            y = y1;
            z = z1;
            
            // Rotate around Y axis
            let cosY = Math.cos(rotation.y);
            let sinY = Math.sin(rotation.y);
            let x1 = x * cosY + z * sinY;
            z1 = -x * sinY + z * cosY;
            x = x1;
            z = z1;
            
            // Rotate around Z axis
            let cosZ = Math.cos(rotation.z);
            let sinZ = Math.sin(rotation.z);
            let x2 = x * cosZ - y * sinZ;
            let y2 = x * sinZ + y * cosZ;
            
            return [x2, y2, z1];
        }

        function project(point) {
            const distance = 600;
            const z = point[2] + distance;
            const scale = distance / z;
            
            return {
                x: point[0] * scale + canvas.width / 2,
                y: point[1] * scale + canvas.height / 2,
                z: z,
                scale: scale
            };
        }

        function drawCube() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Smooth interpolation towards target rotation
            cubeRotation.x += (targetRotation.x - cubeRotation.x) * 0.1;
            cubeRotation.y += (targetRotation.y - cubeRotation.y) * 0.1;
            cubeRotation.z += (targetRotation.z - cubeRotation.z) * 0.1;
            
            // Rotate and project all points
            const projectedPoints = cubePoints.map(point => {
                const rotated = rotatePoint(point, cubeRotation);
                return project(rotated);
            });
            
            // Sort by depth for proper rendering
            const sortedPoints = projectedPoints.slice().sort((a, b) => b.z - a.z);
            
            // Draw dots
            sortedPoints.forEach(point => {
                const dotSize = 3 + point.scale * 1.5;
                const opacity = Math.min(0.9, Math.max(0.4, point.scale * 0.9));
                
                // Draw glow
                ctx.shadowBlur = 20;
                ctx.shadowColor = `rgba(255, 0, 0, ${opacity * 0.6})`;
                ctx.fillStyle = `rgba(255, 0, 0, ${opacity})`;
                ctx.beginPath();
                ctx.arc(point.x, point.y, dotSize, 0, Math.PI * 2);
                ctx.fill();
            });
            
            ctx.shadowBlur = 0;
        }

        function animate() {
            drawCube();
            requestAnimationFrame(animate);
        }

        // Handle scroll to rotate cube - much more responsive
        window.addEventListener('scroll', () => {
            const scrollDelta = window.scrollY - lastScrollY;
            targetRotation.y += scrollDelta * 0.005;
            targetRotation.x += scrollDelta * 0.003;
            lastScrollY = window.scrollY;
        });

        // Auto-rotate slowly when not scrolling
        setInterval(() => {
            targetRotation.y += 0.01;
            targetRotation.x += 0.005;
        }, 16);

        animate();
    </script>
</body>
</html>
